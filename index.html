<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุชุจุฑ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">
                <h2>ูุธุงู ุงููุฎุชุจุฑ</h2>
            </div>
            <nav class="menu">
                <a href="#dashboard" class="menu-item active">ููุญุฉ ุงูุชุญูู</a>
                <a href="#patients" class="menu-item">ุฅุฏุงุฑุฉ ุงููุฑุถู</a>
                <a href="#tests" class="menu-item">ุฅุฏุงุฑุฉ ุงููุญูุตุงุช</a>
                <a href="#results" class="menu-item">ูุชุงุจุฉ ุงููุชุงุฆุฌ</a>
                <a href="#test-definitions" class="menu-item">ุฃููุงุน ุงูุชุญุงููู</a>
                <a href="#inventory" class="menu-item" id="inventory-nav">ุฅุฏุงุฑุฉ ุงููุฎุฒูู</a>
                <a href="#" id="logoutBtn" class="menu-item">ุชุณุฌูู ุงูุฎุฑูุฌ</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
          <header>
              <h1>ููุญุฉ ุงูุชุญูู</h1>
              <div class="header-right">
                  <input type="text" id="searchInput" placeholder="ุงุจุญุซ ูู ุงูุฌุฏูู ุงูุญุงูู..." class="search-input">
                  <button id="theme-toggle" class="theme-btn">๐</button>
              </div>
          </header>

            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="cards">
                    <div class="card">
                        <h3>ุฅุฌูุงูู ุงููุฑุถู</h3>
                        <p id="totalPatients">0</p>
                    </div>
                    <div class="card">
                        <h3>ุงููุญูุตุงุช ุงููุนููุฉ</h3>
                        <p id="pendingTests">0</p>
                    </div>
                    <div class="card">
                        <h3>ุฅุฌูุงูู ุงููุชุงุฆุฌ</h3>
                        <p id="totalResults">0</p>
                    </div>
                    <div class="card">
                        <h3>ุฃููุงุน ุงูุชุญุงููู</h3>
                        <p id="totalTestDefs">0</p>
                    </div>
                    <div class="card">
                        <h3>ุงููุฎุฒูู ุงูููุฎูุถ</h3>
                        <p id="lowStockItems">0</p>
                    </div>
                </div>
                <div class="charts-container">
                    <div class="chart-card">
                        <h3>ุญุงูุฉ ุงููุญูุตุงุช</h3>
                        <canvas id="testsStatusChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>ุงููุญูุตุงุช ุญุณุจ ุงูููุน</h3>
                        <canvas id="testsByTypeChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Patients Section -->
            <section id="patients" class="content-section">
                <h2>ุฅุถุงูุฉ ูุฑูุถ ุฌุฏูุฏ</h2>
                <form id="patientForm">
                    <input type="text" id="patientName" placeholder="ุงุณู ุงููุฑูุถ" required>
                    <input type="number" id="patientAge" placeholder="ุงูุนูุฑ" required>
                    <select id="patientGender" required>
                        <option value="" disabled selected>ุงุฎุชุฑ ุงูุฌูุณ</option>
                        <option value="ุฐูุฑ">ุฐูุฑ</option>
                        <option value="ุฃูุซู">ุฃูุซู</option>
                    </select>
                    <input type="tel" id="patientPhone" placeholder="ุฑูู ุงููุงุชู">
                    <textarea id="patientRecord" placeholder="ุงูุณุฌู ุงูุทุจู"></textarea>
                    <button type="submit">ุฅุถุงูุฉ ูุฑูุถ</button>
                </form>
                <hr>
                <div class="table-header">
                    <h2>ูุงุฆูุฉ ุงููุฑุถู</h2>
                    <button id="exportPatientsBtn" class="export-btn">ุชุตุฏูุฑ ุฅูู Excel</button>
                </div>
                <table id="patientsTable">
                    <thead>
                        <tr>
                            <th>ุงููุนุฑู</th>
                            <th>ุงูุงุณู</th>
                            <th>ุงูุนูุฑ</th>
                            <th>ุงูุฌูุณ</th>
                            <th>ุงููุงุชู</th>
                            <th>ุงูุณุฌู ุงูุทุจู</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Tests Section -->
            <section id="tests" class="content-section">
                <h2>ุชุณุฌูู ุทูุจ ูุญุต ุฌุฏูุฏ</h2>
                <form id="testForm">
                    <select id="testPatientId" required>
                        <option value="" disabled selected>ุงุฎุชุฑ ูุฑูุถุงู</option>
                    </select>
                    <div id="testTypesContainer" class="checkbox-container"></div>
                    <button type="submit">ุฅุถุงูุฉ ุงููุญูุตุงุช ุงููุญุฏุฏุฉ</button>
                </form>
                <hr>
                <div class="table-header">
                    <h2>ูุงุฆูุฉ ุงููุญูุตุงุช</h2>
                    <button id="exportTestsBtn" class="export-btn">ุชุตุฏูุฑ ุฅูู Excel</button>
                </div>
                <table id="testsTable">
                    <thead>
                        <tr>
                            <th>ูุนุฑู ุงููุญุต</th>
                            <th>ุงุณู ุงููุฑูุถ</th>
                            <th>ููุน ุงููุญุต</th>
                            <th>ุชุงุฑูุฎ ุงูุทูุจ</th>
                            <th>ุงูุญุงูุฉ</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Results Section -->
            <section id="results" class="content-section">
                <h2>ูุชุงุจุฉ ูุชูุฌุฉ ุงูุชุญููู</h2>
                <form id="resultForm">
                    <select id="resultTestId" required>
                        <option value="" disabled selected>ุงุฎุชุฑ ูุญุตูุง ูุฅุถุงูุฉ ูุชูุฌุฉ</option>
                    </select>
                    <input type="text" id="resultRefNum" placeholder="ุงููุทุงู ุงููุฑุฌุนู (ูุธูุฑ ุชููุงุฆูุงู)" readonly>
                    <textarea id="resultDetails" placeholder="ุงูุชุจ ุชูุงุตูู ููุชูุฌุฉ ุงูุชุญููู ููุง..." required></textarea>
                    <textarea id="resultNotes" placeholder="ููุงุญุธุงุช ุงูุทุจูุจ (ุงุฎุชูุงุฑู)"></textarea>
                    <button type="submit">ุญูุธ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</button>
                </form>
                <hr>
                <div class="table-header">
                    <h2>ูุงุฆูุฉ ุงููุชุงุฆุฌ ุงููุณุฌูุฉ</h2>
                    <button id="exportResultsBtn" class="export-btn">ุชุตุฏูุฑ ุฅูู Excel</button>
                </div>
                <table id="resultsTable">
                    <thead>
                        <tr>
                            <th>ูุนุฑู ุงููุชูุฌุฉ</th>
                            <th>ูุนุฑู ุงููุญุต</th>
                            <th>ุชูุงุตูู ุงููุชูุฌุฉ</th>
                            <th>ููุงุญุธุงุช</th>
                            <th>ุงููุทุงู ุงููุฑุฌุนู</th>
                            <th>ุชุงุฑูุฎ ุงูุฅุฏุฎุงู</th>
                            <th>ุฅุฌุฑุงุกุงุช / ุทุจุงุนุฉ</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Test Definitions Section -->
            <section id="test-definitions" class="content-section">
                <h2>ุฅุถุงูุฉ ููุน ุชุญููู ุฌุฏูุฏ</h2>
                <form id="testDefinitionForm">
                    <input type="text" id="testDefName" placeholder="ุงุณู ุงูุชุญููู (ูุซุงู: CBC)" required>
                    <input type="text" id="testDefRefRange" placeholder="ุงููุทุงู ุงููุฑุฌุนู (ูุซุงู: 4.5-5.5)" required>
                    
                    <div class="consumed-materials-container">
                        <h4>ุงูููุงุฏ ุงููุณุชูููุฉ ุงููุทููุจุฉ ููุชุญููู</h4>
                        <div class="add-material-controls">
                            <select id="testDefMaterialSelect"></select>
                            <button type="button" id="addTestDefMaterialBtn" class="add-material-btn">ุฅุถุงูุฉ</button>
                        </div>
                        <div id="testDefMaterialsList"></div>
                    </div>
                    
                    <button type="submit">ุญูุธ ููุน ุงูุชุญููู</button>
                </form>
                <hr>
                <h2>ูุงุฆูุฉ ุฃููุงุน ุงูุชุญุงููู</h2>
                <table id="testDefinitionsTable">
                    <thead>
                        <tr>
                            <th>ุงุณู ุงูุชุญููู</th>
                            <th>ุงููุทุงู ุงููุฑุฌุนู</th>
                            <th>ุงูููุงุฏ ุงููุณุชูููุฉ</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Inventory Section -->
            <section id="inventory" class="content-section">
                <h2>ุฅุถุงูุฉ ูุงุฏุฉ ุฌุฏูุฏุฉ ูููุฎุฒูู</h2>
                <form id="inventoryForm">
                    <input type="text" id="itemName" placeholder="ุงุณู ุงููุงุฏุฉ" required>
                    <input type="text" id="itemUnit" placeholder="ูุญุฏุฉ ุงูููุงุณ (ml, kit, ...)" required>
                    <input type="number" id="currentStock" placeholder="ุงููููุฉ ุงูุญุงููุฉ" required>
                    <input type="number" id="reorderLevel" placeholder="ุญุฏ ุฅุนุงุฏุฉ ุงูุทูุจ" required>
                    <button type="submit">ุฅุถุงูุฉ ูููุฎุฒูู</button>
                </form>
                <hr>
                <div class="table-header">
                    <h2>ุญุงูุฉ ุงููุฎุฒูู</h2>
                    <button id="exportInventoryBtn" class="export-btn">ุชุตุฏูุฑ ุฅูู Excel</button>
                </div>
                <table id="inventoryTable">
                    <thead>
                        <tr>
                            <th>ุงููุนุฑู</th>
                            <th>ุงุณู ุงููุงุฏุฉ</th>
                            <th>ุงููููุฉ ุงูุญุงููุฉ (ุงููุญุฏุฉ)</th>
                            <th>ุญุฏ ุฅุนุงุฏุฉ ุงูุทูุจ</th>
                            <th>ุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

        </main>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2 id="modalTitle">ุชุนุฏูู ุงูุณุฌู</h2>
            <form id="editForm"></form>
        </div>
    </div>

    <!-- Print Report Container -->
    <div id="print-report-container">
        <div id="report-content">
            <!-- Content will be injected here by JavaScript -->
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
            <p>ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ูุฑูุฑ ุงููุฏูุฑ ูููุตูู ุงููุงููุ ุฃู ุงูุฏุฎูู ูุฒุงุฆุฑ ุจุตูุงุญูุงุช ูุญุฏูุฏุฉ.</p>
            <form id="loginForm">
                <input type="password" id="passwordInput" placeholder="ูููุฉ ุงููุฑูุฑ" autofocus>
                <button type="submit">ุฏุฎูู ููุฏูุฑ</button>
                <button type="button" id="guestLoginBtn">ุงูุฏุฎูู ูุฒุงุฆุฑ</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
